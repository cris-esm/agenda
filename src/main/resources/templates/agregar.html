<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Personas</title>

	<!-- Bootstrap CSS -->

	<link href="../static/css/bootstrap.css" rel="stylesheet" th:href="@{/css/bootstrap.css}">
	<link th:href="@{/css/index.css}" rel="stylesheet" />

	<link href="https://unpkg.com/nes.css@2.2.0/css/nes.min.css" rel="stylesheet" />
	<!-- último -->
	<link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
	<!-- solo estilo del núcleo -->
	<link href="https://unpkg.com/nes.css/css/nes-core.min.css" rel="stylesheet" />

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>

<body style="background-image:url(../static/img/mario.jpg) no-repeat center center fixed;">
	<div class="container" style="text-align: center;">


		<br>
		<div class="container" style="position: relative;left: -60px;">
			<div clas="persona" style="width: 300px;display:inline-block;">
				<div class="nes-field">
					<label for="name_field" style="color: white;">Nombre</label>
					<input type="text" id="nombre" class="nes-input">
				</div>
				<div class="nes-field">
					<label for="name_field" style="color: white;">Telefono</label>
					<input type="tel" id="telefono" class="nes-input">
				</div>
				<div class="nes-field">
					<label for="name_field" style="color: white;">Email</label>
					<input type="text" id="email" class="nes-input">
				</div>
				<div class="nes-field">
					<label for="name_field" style="color: white;">Fecha Nacimiento</label>
					<input type="text" id="nacimiento" class="nes-input">
				</div>
			</div>
			<div class="datosDom" style="width: 300px;display:inline-block;">
				<div class="nes-field">
					<label for="name_field" style="color: white;">Calle</label>
					<input type="text" id="calle" class="nes-input">
				</div>
				<div class="nes-field">
					<label for="name_field" style="color: white;">Altura</label>
					<input type="text" id="altura" class="nes-input">
				</div>
				<div class="nes-field">
					<label for="name_field" style="color: white;">Piso</label>
					<input type="text" id="piso" class="nes-input">
				</div>
			
			</div>
			<div class="domicilio" style="width: 300px;display:inline-block;">
				<label for="warning_select" style="color: white;">Pais</label>
				<div class="nes-select is-warning">
					<select id="customerNameList" name="customer" onchange="getComboA(this)">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="pais : ${paises}" th:value="${pais.id}" th:text="${pais.nombre}" id="pais">
						</option>
					</select>
				</div>
				<label for="warning_select" style="color: white;" name="provincia">Provincia</label>
				<div class="nes-select is-warning">
					<select id="customerNameListProvincia" name="customerr" onchange="getComboB(this)">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="provincia : ${provincias}" th:value="${provincia.id}"
							th:text="${provincia.nombre}" id="provincia"></option>

					</select>
				</div>
				<label for="warning_select" style="color: white;">Localidad</label>
				<div class="nes-select is-warning">
					<select id="customerNameListLocalidad" name="customerrr">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="localidad : ${localidades}" th:value="${localidad.id}"
							th:text="${localidad.nombre}" id="localidad">To be</option>

					</select>
				</div>
				<label for="warning_select" style="color: white;">Tipo Contacto</label>
				<div class="nes-select is-warning">
					<select required id="warning_select">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="tipoContacto : ${tiposContacto}" th:value="${tipoContacto.id}"
							th:text="${tipoContacto.nombre}" id="tipoContacto">Tipo Contacto</option>
					</select>
				</div>

			</div>
			<div style="position: relative;width: 300px;top:-290px;left: 1020px;">
				<label for="warning_select" style="color: white;">Tecnologia Preferida</label>
				<div class="nes-select is-warning">
					<select required id="warning_select">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="tecnologia : ${tecnologias}" th:value="${tecnologia.id}"
							th:text="${tecnologia.nombre}" id="tecnologia">To be</option>
					</select>
				</div>
				<label for="warning_select" style="color: white;">Signo Zodiacal</label>
				<div class="nes-select is-warning">
					<select required id="warning_select">
						<option value="" disabled selected hidden>Select...</option>
						<option th:each="signo : ${signos}" th:value="${signo.id}" th:text="${signo.nombre}" id="signo">
							To be</option>
					</select>
				</div>
			</div>
			<div class="botones" style="position: relative;left: -25%;bottom: 250px;">
				<a class="btn btn-secondary" th:object="${Persona}" method="post"
					style="position: relative;left:35%;top:112px;" onclick="agregarPersona()">Agregar
					Persona</a><br>
				<div style="position:relative;left: 35%;">
					<a class="btn btn-primary" th:href="@{/}" style="position: relative;top:112px;">Volver</a>
				</div>
			</div>
		</div>

		<script>

			function nombre(selectObject) {

			}
			function agregarPersona() {
				var nombre = document.getElementById("nombre").value;
				var telefono = document.getElementById("telefono").value;
				var email = document.getElementById("email").value;
				var nacimiento = document.getElementById("nacimiento").value;
				var calle = document.getElementById("calle").value;
				var altura = document.getElementById("altura").value;
				var piso = document.getElementById("piso").value;
				var departamento = document.getElementById("departamento").value;
				var pais = document.getElementById("pais").value;
				var provincia = document.getElementById("provincia").value;
				var localidad = document.getElementById("localidad").value;
				var tipoContacto = document.getElementById("tipoContacto").value;
				var tecnologia = document.getElementById("tecnologia").value;
				var signo = document.getElementById("signo").value;
				//var provincia = document.getElementById("provincia").value
				let person = {
					nombre: nombre, telefono: telefono, email: email, nacimiento: nacimiento,
					calle: calle, altura: altura, piso: piso, departamento: departamento, pais: pais, provincia: provincia
				};


				console.log(person);
			}

			function getComboA(selectObject) {
				var value = selectObject.value;

				console.log(selectObject);
				$("#customerNameListProvincia > option").each(function () {
					$("#customerNameListProvincia option[value='" + value + "']").remove();
				});

				$("#customerNameListLocalidad > option").each(function () {
					$("#customerNameListLocalidad option[value='" + value + "']").remove();
				});


				var request = new Request('http://localhost:8080/api/Provincias/' + value);
				//	$('#customerr').remove();

				fetch(request).then(function (response) {
					return response.text();
				}).then(function (text) {
					elemento = text;

					myArr = JSON.parse(text);
					console.log(myArr);

					var data = myArr;
					for (var index = 0; index <= data.length - 1; index++) {
						$('#customerNameListProvincia').append('<option value="' + data[index].id + '">' + data[index].nombre + '</option>');
					}
				});
				console.log(value);
			}

			function getComboB(selectObject) {
				var value = selectObject.value;

				$("#customerNameListLocalidad > option").each(function () {
					$("#customerNameListLocalidad option[value='" + value + "']").remove();
				});

				var request = new Request('http://localhost:8080/api/Localidades/' + value);
				//	$('#customerr').remove();

				fetch(request).then(function (response) {
					return response.text();
				}).then(function (text) {
					elemento = text;

					myArr = JSON.parse(text);
					console.log(myArr);

					var data = myArr;
					for (var index = 0; index <= data.length - 1; index++) {
						$('#customerNameListLocalidad').append('<option value="' + data[index].id + '">' + data[index].nombre + '</option>');
					}
				});
				console.log(value);
			}



		</script>

</body>

</html>